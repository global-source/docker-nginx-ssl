# Dependancy for SSL
apt-get update
apt-get install certbot python3-certbot-nginx

# Create Network
docker network create web

# Build docker image
docker build -t my-docker-app .

# Create LetsEncrypt SSL Certificate
certbot -d domain1.com -d domain2.com

# Run Docker images with domain name and use the same in nginx.conf
docker run -d --name domain1 --network web my-docker-app
docker run -d --name domain2 --network web my-docker-app 

# Command to Run Nginx
docker run --name nginx --network web -p 80:80 -p 443:443 -v ./nginx.conf:/etc/nginx/nginx.conf -v /etc/letsencrypt/:/etc/letsencrypt/ nginx

# Note:*
# ---Nginx---:
# 1. Should update the domain name as per the image name
# 2. Should point the (SSL) certificate and key file location
# 3. Should mount nginx.conf and letsencrypt as virtual dir  
# 4. Test Image: shankarthiyagu/hello-world
